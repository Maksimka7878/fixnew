import{f as w,o as P,p as N,r,j as e,L as b,A as k,B as C,t as l}from"./index-q3d_ps4o.js";import{C as v,c as S,d as A,e as D,a as L}from"./card-cyR1_5S9.js";import{S as I}from"./shield-C1YhSwGL.js";function E(){const n=w(),g=P(),{login:f}=N(),c=g.state?.phone||"",[o,x]=r.useState(["","","",""]),[i,m]=r.useState(!1),[p,h]=r.useState(60),d=r.useRef([]);r.useEffect(()=>{if(!c){n("/auth/login");return}const t=setInterval(()=>{h(s=>s>0?s-1:0)},1e3);return()=>clearInterval(t)},[c,n]);const y=(t,s)=>{if(!/^\d*$/.test(s))return;const a=[...o];a[t]=s.slice(-1),x(a),s&&t<3&&d.current[t+1]?.focus(),a.every(V=>V)&&u()},j=(t,s)=>{s.key==="Backspace"&&!o[t]&&t>0&&d.current[t-1]?.focus()},u=async()=>{m(!0),await new Promise(a=>setTimeout(a,1500));const t={id:"1",phone:c,firstName:"Пользователь",lastName:"",email:"",regionId:"1",region:{id:"1",code:"MOW",name:"Москва",timezone:"Europe/Moscow",currency:"RUB",isActive:!0},role:"user",isVerified:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},s={accessToken:"mock_access_token",refreshToken:"mock_refresh_token",expiresAt:Date.now()+36e5};f(t,s),l.success("Вы успешно вошли"),n("/")},O=()=>{h(60),l.success("Код отправлен повторно")};return e.jsx("div",{"code-path":"src/pages/auth/OtpVerifyPage.tsx:100:5",className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{"code-path":"src/pages/auth/OtpVerifyPage.tsx:101:7",className:"w-full max-w-md",children:[e.jsxs(b,{"code-path":"src/pages/auth/OtpVerifyPage.tsx:102:9",to:"/auth/login",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[e.jsx(k,{"code-path":"src/pages/auth/OtpVerifyPage.tsx:106:11",className:"w-4 h-4 mr-2"}),"Назад"]}),e.jsxs(v,{"code-path":"src/pages/auth/OtpVerifyPage.tsx:110:9",children:[e.jsxs(S,{"code-path":"src/pages/auth/OtpVerifyPage.tsx:111:11",className:"text-center",children:[e.jsx("div",{"code-path":"src/pages/auth/OtpVerifyPage.tsx:112:13",className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(I,{"code-path":"src/pages/auth/OtpVerifyPage.tsx:113:15",className:"w-8 h-8 text-red-600"})}),e.jsx(A,{"code-path":"src/pages/auth/OtpVerifyPage.tsx:115:13",className:"text-2xl",children:"Подтверждение"}),e.jsxs(D,{"code-path":"src/pages/auth/OtpVerifyPage.tsx:116:13",children:["Введите код из SMS, отправленного на ",c]})]}),e.jsxs(L,{"code-path":"src/pages/auth/OtpVerifyPage.tsx:120:11",children:[e.jsx("div",{"code-path":"src/pages/auth/OtpVerifyPage.tsx:121:13",className:"flex justify-center gap-3 mb-6",children:o.map((t,s)=>e.jsx("input",{"code-path":"src/pages/auth/OtpVerifyPage.tsx:123:17",ref:a=>{d.current[s]=a},type:"text",inputMode:"numeric",maxLength:1,value:t,onChange:a=>y(s,a.target.value),onKeyDown:a=>j(s,a),className:"w-14 h-16 text-center text-2xl font-bold border-2 border-gray-200 rounded-lg focus:border-red-500 focus:outline-none",disabled:i},s))}),e.jsx(C,{"code-path":"src/pages/auth/OtpVerifyPage.tsx:138:13",onClick:()=>u(),className:"w-full bg-red-600 hover:bg-red-700",disabled:i||o.some(t=>!t),children:i?"Проверка...":"Подтвердить"}),e.jsx("div",{"code-path":"src/pages/auth/OtpVerifyPage.tsx:146:13",className:"text-center mt-6",children:p>0?e.jsxs("p",{"code-path":"src/pages/auth/OtpVerifyPage.tsx:148:17",className:"text-gray-500",children:["Отправить код повторно через ",p," сек"]}):e.jsx("button",{"code-path":"src/pages/auth/OtpVerifyPage.tsx:152:17",onClick:O,className:"text-red-600 hover:underline",children:"Отправить код повторно"})})]})]})]})})}export{E as OtpVerifyPage};
