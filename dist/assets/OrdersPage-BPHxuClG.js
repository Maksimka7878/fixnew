import{c as N,p as y,N as b,r,j as e,B as i,l as f}from"./index-q3d_ps4o.js";import{C as o,a as n,c as v,d as w}from"./card-cyR1_5S9.js";import{B as h}from"./badge-D42VSav7.js";import{P as t}from"./package-BSy424wu.js";import{C as l}from"./clock-CKcEwFr5.js";import{T as C}from"./truck-qclAGzpR.js";import{C as k}from"./chevron-right-Beqg_wgs.js";const S=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],F=N("circle-check-big",S),x={new:{label:"Новый",color:"bg-yellow-100 text-yellow-800",icon:l},confirmed:{label:"Подтвержден",color:"bg-blue-100 text-blue-800",icon:t},processing:{label:"В обработке",color:"bg-purple-100 text-purple-800",icon:t},ready:{label:"Готов к выдаче",color:"bg-green-100 text-green-800",icon:t},delivering:{label:"В пути",color:"bg-indigo-100 text-indigo-800",icon:C},completed:{label:"Выполнен",color:"bg-green-100 text-green-800",icon:F},cancelled:{label:"Отменен",color:"bg-red-100 text-red-800",icon:l},returned:{label:"Возврат",color:"bg-red-100 text-red-800",icon:l}};function T(){const{user:d}=y(),{getOrders:p}=b(),[g,u]=r.useState([]),[m,j]=r.useState(!0),[s,O]=r.useState(null);return r.useEffect(()=>{d&&p(d.id).then(a=>{a.success&&a.data&&u(a.data),j(!1)})},[d,p]),m?e.jsx("div",{"code-path":"src/pages/account/OrdersPage.tsx:41:7",className:"container mx-auto px-4 py-8",children:e.jsx("div",{"code-path":"src/pages/account/OrdersPage.tsx:42:9",className:"animate-pulse space-y-4",children:Array.from({length:3}).map((a,c)=>e.jsx("div",{"code-path":"src/pages/account/OrdersPage.tsx:44:13",className:"h-32 bg-gray-200 rounded-lg"},c))})}):g.length===0?e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:53:7",className:"container mx-auto px-4 py-16 text-center",children:[e.jsx("div",{"code-path":"src/pages/account/OrdersPage.tsx:54:9",className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(t,{"code-path":"src/pages/account/OrdersPage.tsx:55:11",className:"w-12 h-12 text-gray-400"})}),e.jsx("h1",{"code-path":"src/pages/account/OrdersPage.tsx:57:9",className:"text-2xl font-bold text-gray-900 mb-2",children:"У вас пока нет заказов"}),e.jsx("p",{"code-path":"src/pages/account/OrdersPage.tsx:58:9",className:"text-gray-600 mb-6",children:"Сделайте первый заказ в нашем магазине"}),e.jsx(i,{"code-path":"src/pages/account/OrdersPage.tsx:59:9",className:"bg-red-600 hover:bg-red-700",asChild:!0,children:e.jsx("a",{"code-path":"src/pages/account/OrdersPage.tsx:60:11",href:"/catalog",children:"Перейти в каталог"})})]}):e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:67:5",className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{"code-path":"src/pages/account/OrdersPage.tsx:68:7",className:"text-2xl md:text-3xl font-bold text-gray-900 mb-6",children:"Мои заказы"}),e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:70:7",className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{"code-path":"src/pages/account/OrdersPage.tsx:72:9",className:"lg:col-span-2 space-y-4",children:g.map(a=>{const c=x[a.status],P=c.icon;return e.jsx(o,{"code-path":"src/pages/account/OrdersPage.tsx:78:15",className:`cursor-pointer hover:shadow-md transition-shadow ${s?.id===a.id?"ring-2 ring-red-600":""}`,onClick:()=>O(a),children:e.jsx(n,{"code-path":"src/pages/account/OrdersPage.tsx:84:17",className:"p-6",children:e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:85:19",className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:86:21",children:[e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:87:23",className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{"code-path":"src/pages/account/OrdersPage.tsx:88:25",className:"font-bold text-lg",children:["Заказ #",a.orderNumber]}),e.jsxs(h,{"code-path":"src/pages/account/OrdersPage.tsx:89:25",className:c.color,children:[e.jsx(P,{"code-path":"src/pages/account/OrdersPage.tsx:90:27",className:"w-3 h-3 mr-1"}),c.label]})]}),e.jsxs("p",{"code-path":"src/pages/account/OrdersPage.tsx:94:23",className:"text-sm text-gray-500",children:["От ",new Date(a.createdAt).toLocaleDateString("ru-RU")]}),e.jsxs("p",{"code-path":"src/pages/account/OrdersPage.tsx:97:23",className:"text-sm text-gray-500",children:[a.items.length," товаров на ",a.summary.total.toFixed(2)," ₽"]})]}),e.jsx(k,{"code-path":"src/pages/account/OrdersPage.tsx:101:21",className:"w-5 h-5 text-gray-400"})]})})},a.id)})}),e.jsx("div",{"code-path":"src/pages/account/OrdersPage.tsx:110:9",className:"lg:col-span-1",children:s?e.jsxs(o,{"code-path":"src/pages/account/OrdersPage.tsx:112:13",className:"sticky top-24",children:[e.jsx(v,{"code-path":"src/pages/account/OrdersPage.tsx:113:15",children:e.jsxs(w,{"code-path":"src/pages/account/OrdersPage.tsx:114:17",children:["Детали заказа #",s.orderNumber]})}),e.jsxs(n,{"code-path":"src/pages/account/OrdersPage.tsx:116:15",className:"space-y-6",children:[e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:118:17",children:[e.jsx("p",{"code-path":"src/pages/account/OrdersPage.tsx:119:19",className:"text-sm text-gray-500 mb-1",children:"Статус"}),e.jsx(h,{"code-path":"src/pages/account/OrdersPage.tsx:120:19",className:x[s.status].color,children:x[s.status].label})]}),e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:126:17",children:[e.jsx("p",{"code-path":"src/pages/account/OrdersPage.tsx:127:19",className:"text-sm text-gray-500 mb-2",children:"Товары"}),e.jsx("div",{"code-path":"src/pages/account/OrdersPage.tsx:128:19",className:"space-y-2",children:s.items.map((a,c)=>e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:130:23",className:"flex justify-between text-sm",children:[e.jsxs("span",{"code-path":"src/pages/account/OrdersPage.tsx:131:25",className:"line-clamp-1 flex-1",children:[a.productName," x",a.quantity]}),e.jsxs("span",{"code-path":"src/pages/account/OrdersPage.tsx:132:25",className:"font-medium ml-2",children:[a.total.toFixed(2)," ₽"]})]},c))})]}),e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:139:17",children:[e.jsx("p",{"code-path":"src/pages/account/OrdersPage.tsx:140:19",className:"text-sm text-gray-500 mb-1",children:"Доставка"}),e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:141:19",className:"flex items-start gap-2",children:[e.jsx(f,{"code-path":"src/pages/account/OrdersPage.tsx:142:21",className:"w-4 h-4 mt-0.5 text-gray-400"}),e.jsx("span",{"code-path":"src/pages/account/OrdersPage.tsx:143:21",className:"text-sm",children:s.delivery.address?`${s.delivery.address.city}, ${s.delivery.address.street}, ${s.delivery.address.building}`:s.delivery.storeName||"Адрес не указан"})]})]}),e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:150:17",className:"border-t pt-4",children:[e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:151:19",className:"space-y-1 text-sm",children:[e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:152:21",className:"flex justify-between",children:[e.jsx("span",{"code-path":"src/pages/account/OrdersPage.tsx:153:23",className:"text-gray-500",children:"Товары"}),e.jsxs("span",{"code-path":"src/pages/account/OrdersPage.tsx:154:23",children:[s.summary.subtotal.toFixed(2)," ₽"]})]}),e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:156:21",className:"flex justify-between",children:[e.jsx("span",{"code-path":"src/pages/account/OrdersPage.tsx:157:23",className:"text-gray-500",children:"Доставка"}),e.jsx("span",{"code-path":"src/pages/account/OrdersPage.tsx:158:23",children:s.summary.deliveryCost===0?"Бесплатно":`${s.summary.deliveryCost.toFixed(2)} ₽`})]}),s.summary.discount>0&&e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:161:23",className:"flex justify-between text-green-600",children:[e.jsx("span",{"code-path":"src/pages/account/OrdersPage.tsx:162:25",children:"Скидка"}),e.jsxs("span",{"code-path":"src/pages/account/OrdersPage.tsx:163:25",children:["-",s.summary.discount.toFixed(2)," ₽"]})]})]}),e.jsxs("div",{"code-path":"src/pages/account/OrdersPage.tsx:167:19",className:"flex justify-between mt-4 pt-4 border-t",children:[e.jsx("span",{"code-path":"src/pages/account/OrdersPage.tsx:168:21",className:"font-bold",children:"Итого"}),e.jsxs("span",{"code-path":"src/pages/account/OrdersPage.tsx:169:21",className:"font-bold text-lg text-red-600",children:[s.summary.total.toFixed(2)," ₽"]})]})]}),s.status==="new"&&e.jsx(i,{"code-path":"src/pages/account/OrdersPage.tsx:175:19",variant:"outline",className:"w-full text-red-600",children:"Отменить заказ"})]})]}):e.jsx(o,{"code-path":"src/pages/account/OrdersPage.tsx:182:13",className:"sticky top-24",children:e.jsxs(n,{"code-path":"src/pages/account/OrdersPage.tsx:183:15",className:"p-8 text-center",children:[e.jsx(t,{"code-path":"src/pages/account/OrdersPage.tsx:184:17",className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("p",{"code-path":"src/pages/account/OrdersPage.tsx:185:17",className:"text-gray-500",children:"Выберите заказ для просмотра деталей"})]})})})]})]})}export{T as OrdersPage};
