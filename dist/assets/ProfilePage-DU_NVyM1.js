import{c as $,r as u,j as e,E as V,F as B,G,q as L,h as q,p as O,B as v,n as j,U as k,I as N,m as J,J as K,l as W,t as R}from"./index-q3d_ps4o.js";import{C as S,c as y,d as w,a as b}from"./card-cyR1_5S9.js";const Q=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],X=$("pen",Q);const Y=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Z=$("save",Y);function ee(a,s=[]){let c=[];function n(t,r){const o=u.createContext(r);o.displayName=t+"Context";const l=c.length;c=[...c,r];const g=d=>{const{scope:x,children:h,...m}=d,f=x?.[a]?.[l]||o,P=u.useMemo(()=>m,Object.values(m));return e.jsx(f.Provider,{value:P,children:h})};g.displayName=t+"Provider";function p(d,x){const h=x?.[a]?.[l]||o,m=u.useContext(h);if(m)return m;if(r!==void 0)return r;throw new Error(`\`${d}\` must be used within \`${t}\``)}return[g,p]}const i=()=>{const t=c.map(r=>u.createContext(r));return function(o){const l=o?.[a]||t;return u.useMemo(()=>({[`__scope${a}`]:{...o,[a]:l}}),[o,l])}};return i.scopeName=a,[n,ae(i,...s)]}function ae(...a){const s=a[0];if(a.length===1)return s;const c=()=>{const n=a.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(t){const r=n.reduce((o,{useScope:l,scopeName:g})=>{const d=l(t)[`__scope${g}`];return{...o,...d}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:r}),[r])}};return c.scopeName=s.scopeName,c}var te=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],A=te.reduce((a,s)=>{const c=V(`Primitive.${s}`),n=u.forwardRef((i,t)=>{const{asChild:r,...o}=i,l=r?c:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(l,{...o,ref:t})});return n.displayName=`Primitive.${s}`,{...a,[s]:n}},{}),C={exports:{}},E={};var I;function se(){if(I)return E;I=1;var a=B();function s(d,x){return d===x&&(d!==0||1/d===1/x)||d!==d&&x!==x}var c=typeof Object.is=="function"?Object.is:s,n=a.useState,i=a.useEffect,t=a.useLayoutEffect,r=a.useDebugValue;function o(d,x){var h=x(),m=n({inst:{value:h,getSnapshot:x}}),f=m[0].inst,P=m[1];return t(function(){f.value=h,f.getSnapshot=x,l(f)&&P({inst:f})},[d,h,x]),i(function(){return l(f)&&P({inst:f}),d(function(){l(f)&&P({inst:f})})},[d]),r(h),h}function l(d){var x=d.getSnapshot;d=d.value;try{var h=x();return!c(d,h)}catch{return!0}}function g(d,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:o;return E.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:p,E}var M;function ce(){return M||(M=1,C.exports=se()),C.exports}var re=ce();function oe(){return re.useSyncExternalStore(ne,()=>!0,()=>!1)}function ne(){return()=>{}}var _="Avatar",[ie]=ee(_),[le,z]=ie(_),H=u.forwardRef((a,s)=>{const{__scopeAvatar:c,...n}=a,[i,t]=u.useState("idle");return e.jsx(le,{scope:c,imageLoadingStatus:i,onImageLoadingStatusChange:t,children:e.jsx(A.span,{...n,ref:s})})});H.displayName=_;var D="AvatarImage",de=u.forwardRef((a,s)=>{const{__scopeAvatar:c,src:n,onLoadingStatusChange:i=()=>{},...t}=a,r=z(D,c),o=ue(n,t),l=G(g=>{i(g),r.onImageLoadingStatusChange(g)});return L(()=>{o!=="idle"&&l(o)},[o,l]),o==="loaded"?e.jsx(A.img,{...t,ref:s,src:n}):null});de.displayName=D;var T="AvatarFallback",U=u.forwardRef((a,s)=>{const{__scopeAvatar:c,delayMs:n,...i}=a,t=z(T,c),[r,o]=u.useState(n===void 0);return u.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(l)}},[n]),r&&t.imageLoadingStatus!=="loaded"?e.jsx(A.span,{...i,ref:s}):null});U.displayName=T;function F(a,s){return a?s?(a.src!==s&&(a.src=s),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ue(a,{referrerPolicy:s,crossOrigin:c}){const n=oe(),i=u.useRef(null),t=n?(i.current||(i.current=new window.Image),i.current):null,[r,o]=u.useState(()=>F(t,a));return L(()=>{o(F(t,a))},[t,a]),L(()=>{const l=d=>()=>{o(d)};if(!t)return;const g=l("loaded"),p=l("error");return t.addEventListener("load",g),t.addEventListener("error",p),s&&(t.referrerPolicy=s),typeof c=="string"&&(t.crossOrigin=c),()=>{t.removeEventListener("load",g),t.removeEventListener("error",p)}},[t,c,s]),r}var pe=H,xe=U;function ge({className:a,...s}){return e.jsx(pe,{"code-path":"src/components/ui/avatar.tsx:11:5","data-slot":"avatar",className:q("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...s})}function he({className:a,...s}){return e.jsx(xe,{"code-path":"src/components/ui/avatar.tsx:40:5","data-slot":"avatar-fallback",className:q("bg-muted flex size-full items-center justify-center rounded-full",a),...s})}function Pe(){const{user:a,logout:s}=O(),[c,n]=u.useState(!1),[i,t]=u.useState(!1),[r,o]=u.useState({firstName:a?.firstName||"",lastName:a?.lastName||"",email:a?.email||"",phone:a?.phone||""}),l=async()=>{t(!0),await new Promise(p=>setTimeout(p,1e3)),R.success("Профиль обновлен"),n(!1),t(!1)},g=()=>{s(),R.success("Вы вышли из аккаунта"),window.location.href="/"};return a?e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:47:5",className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{"code-path":"src/pages/account/ProfilePage.tsx:48:7",className:"text-2xl md:text-3xl font-bold text-gray-900 mb-6",children:"Мой профиль"}),e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:50:7",className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(S,{"code-path":"src/pages/account/ProfilePage.tsx:52:9",className:"md:col-span-2",children:[e.jsxs(y,{"code-path":"src/pages/account/ProfilePage.tsx:53:11",className:"flex flex-row items-center justify-between",children:[e.jsx(w,{"code-path":"src/pages/account/ProfilePage.tsx:54:13",children:"Личные данные"}),e.jsx(v,{"code-path":"src/pages/account/ProfilePage.tsx:55:13",variant:"outline",size:"sm",onClick:()=>n(!c),children:c?e.jsx(e.Fragment,{children:"Отмена"}):e.jsxs(e.Fragment,{children:[e.jsx(X,{"code-path":"src/pages/account/ProfilePage.tsx:64:19",className:"w-4 h-4 mr-2"}),"Редактировать"]})})]}),e.jsxs(b,{"code-path":"src/pages/account/ProfilePage.tsx:70:11",className:"space-y-6",children:[e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:72:13",className:"flex items-center gap-4",children:[e.jsx(ge,{"code-path":"src/pages/account/ProfilePage.tsx:73:15",className:"w-20 h-20",children:e.jsxs(he,{"code-path":"src/pages/account/ProfilePage.tsx:74:17",className:"bg-red-100 text-red-600 text-2xl",children:[a.firstName?.[0],a.lastName?.[0]]})}),e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:78:15",children:[e.jsxs("p",{"code-path":"src/pages/account/ProfilePage.tsx:79:17",className:"font-medium",children:[a.firstName," ",a.lastName]}),e.jsx("p",{"code-path":"src/pages/account/ProfilePage.tsx:80:17",className:"text-sm text-gray-500",children:a.phone})]})]}),e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:85:13",className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:86:15",className:"space-y-2",children:[e.jsx(j,{"code-path":"src/pages/account/ProfilePage.tsx:87:17",htmlFor:"firstName",children:"Имя"}),e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:88:17",className:"relative",children:[e.jsx(k,{"code-path":"src/pages/account/ProfilePage.tsx:89:19",className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(N,{"code-path":"src/pages/account/ProfilePage.tsx:90:19",id:"firstName",value:r.firstName,onChange:p=>o({...r,firstName:p.target.value}),disabled:!c,className:"pl-10"})]})]}),e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:100:15",className:"space-y-2",children:[e.jsx(j,{"code-path":"src/pages/account/ProfilePage.tsx:101:17",htmlFor:"lastName",children:"Фамилия"}),e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:102:17",className:"relative",children:[e.jsx(k,{"code-path":"src/pages/account/ProfilePage.tsx:103:19",className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(N,{"code-path":"src/pages/account/ProfilePage.tsx:104:19",id:"lastName",value:r.lastName,onChange:p=>o({...r,lastName:p.target.value}),disabled:!c,className:"pl-10"})]})]}),e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:114:15",className:"space-y-2",children:[e.jsx(j,{"code-path":"src/pages/account/ProfilePage.tsx:115:17",htmlFor:"phone",children:"Телефон"}),e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:116:17",className:"relative",children:[e.jsx(J,{"code-path":"src/pages/account/ProfilePage.tsx:117:19",className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(N,{"code-path":"src/pages/account/ProfilePage.tsx:118:19",id:"phone",value:r.phone,onChange:p=>o({...r,phone:p.target.value}),disabled:!c,className:"pl-10"})]})]}),e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:128:15",className:"space-y-2",children:[e.jsx(j,{"code-path":"src/pages/account/ProfilePage.tsx:129:17",htmlFor:"email",children:"Email"}),e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:130:17",className:"relative",children:[e.jsx(K,{"code-path":"src/pages/account/ProfilePage.tsx:131:19",className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(N,{"code-path":"src/pages/account/ProfilePage.tsx:132:19",id:"email",type:"email",value:r.email,onChange:p=>o({...r,email:p.target.value}),disabled:!c,className:"pl-10"})]})]})]}),c&&e.jsxs(v,{"code-path":"src/pages/account/ProfilePage.tsx:145:15",onClick:l,disabled:i,className:"bg-red-600 hover:bg-red-700",children:[e.jsx(Z,{"code-path":"src/pages/account/ProfilePage.tsx:150:17",className:"w-4 h-4 mr-2"}),i?"Сохранение...":"Сохранить изменения"]})]})]}),e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:158:9",className:"space-y-6",children:[e.jsxs(S,{"code-path":"src/pages/account/ProfilePage.tsx:160:11",children:[e.jsx(y,{"code-path":"src/pages/account/ProfilePage.tsx:161:13",children:e.jsx(w,{"code-path":"src/pages/account/ProfilePage.tsx:162:15",className:"text-base",children:"Регион"})}),e.jsx(b,{"code-path":"src/pages/account/ProfilePage.tsx:164:13",children:e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:165:15",className:"flex items-center gap-3",children:[e.jsx(W,{"code-path":"src/pages/account/ProfilePage.tsx:166:17",className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:167:17",children:[e.jsx("p",{"code-path":"src/pages/account/ProfilePage.tsx:168:19",className:"font-medium",children:a.region?.name||"Не выбран"}),e.jsx("p",{"code-path":"src/pages/account/ProfilePage.tsx:169:19",className:"text-sm text-gray-500",children:a.region?.timezone})]})]})})]}),e.jsxs(S,{"code-path":"src/pages/account/ProfilePage.tsx:176:11",children:[e.jsx(y,{"code-path":"src/pages/account/ProfilePage.tsx:177:13",children:e.jsx(w,{"code-path":"src/pages/account/ProfilePage.tsx:178:15",className:"text-base",children:"Быстрые ссылки"})}),e.jsxs(b,{"code-path":"src/pages/account/ProfilePage.tsx:180:13",className:"space-y-2",children:[e.jsx(v,{"code-path":"src/pages/account/ProfilePage.tsx:181:15",variant:"outline",className:"w-full justify-start",asChild:!0,children:e.jsx("a",{"code-path":"src/pages/account/ProfilePage.tsx:182:17",href:"/account/orders",children:"Мои заказы"})}),e.jsx(v,{"code-path":"src/pages/account/ProfilePage.tsx:184:15",variant:"outline",className:"w-full justify-start",asChild:!0,children:e.jsx("a",{"code-path":"src/pages/account/ProfilePage.tsx:185:17",href:"/account/loyalty",children:"Программа лояльности"})}),e.jsx(v,{"code-path":"src/pages/account/ProfilePage.tsx:187:15",variant:"outline",className:"w-full justify-start text-red-600",onClick:g,children:"Выйти"})]})]})]})]})]}):e.jsxs("div",{"code-path":"src/pages/account/ProfilePage.tsx:39:7",className:"container mx-auto px-4 py-16 text-center",children:[e.jsx("h1",{"code-path":"src/pages/account/ProfilePage.tsx:40:9",className:"text-2xl font-bold text-gray-900 mb-4",children:"Требуется авторизация"}),e.jsx("p",{"code-path":"src/pages/account/ProfilePage.tsx:41:9",className:"text-gray-600 mb-6",children:"Войдите в аккаунт, чтобы просмотреть профиль"})]})}export{Pe as ProfilePage};
