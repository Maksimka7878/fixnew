import{c as j,r as x,j as e,E as U,h as D,p as V,K as B,B as O,t as G}from"./index-q3d_ps4o.js";import{C as m,c as v,d as N,a as f}from"./card-cyR1_5S9.js";import{B as H}from"./badge-D42VSav7.js";import{G as S}from"./gift-D1yzX8VK.js";import{C as z}from"./chevron-right-Beqg_wgs.js";const F=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],X=j("award",F);const K=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],q=j("copy",K);const J=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],C=j("star",J);const Q=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],W=j("trending-up",Q);function Y(a,t=[]){let l=[];function s(i,d){const r=x.createContext(d);r.displayName=i+"Context";const n=l.length;l=[...l,d];const u=p=>{const{scope:h,children:c,...g}=p,A=h?.[a]?.[n]||r,T=x.useMemo(()=>g,Object.values(g));return e.jsx(A.Provider,{value:T,children:c})};u.displayName=i+"Provider";function y(p,h){const c=h?.[a]?.[n]||r,g=x.useContext(c);if(g)return g;if(d!==void 0)return d;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[u,y]}const o=()=>{const i=l.map(d=>x.createContext(d));return function(r){const n=r?.[a]||i;return x.useMemo(()=>({[`__scope${a}`]:{...r,[a]:n}}),[r,n])}};return o.scopeName=a,[s,Z(o,...t)]}function Z(...a){const t=a[0];if(a.length===1)return t;const l=()=>{const s=a.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const d=s.reduce((r,{useScope:n,scopeName:u})=>{const p=n(i)[`__scope${u}`];return{...r,...p}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return l.scopeName=t.scopeName,l}var ee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],M=ee.reduce((a,t)=>{const l=U(`Primitive.${t}`),s=x.forwardRef((o,i)=>{const{asChild:d,...r}=o,n=d?l:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(n,{...r,ref:i})});return s.displayName=`Primitive.${t}`,{...a,[t]:s}},{}),b="Progress",w=100,[ae]=Y(b),[te,se]=ae(b),k=x.forwardRef((a,t)=>{const{__scopeProgress:l,value:s=null,max:o,getValueLabel:i=ce,...d}=a;(o||o===0)&&!$(o)&&console.error(oe(`${o}`,"Progress"));const r=$(o)?o:w;s!==null&&!_(s,r)&&console.error(re(`${s}`,"Progress"));const n=_(s,r)?s:null,u=L(n)?i(n,r):void 0;return e.jsx(te,{scope:l,value:n,max:r,children:e.jsx(M.div,{"aria-valuemax":r,"aria-valuemin":0,"aria-valuenow":L(n)?n:void 0,"aria-valuetext":u,role:"progressbar","data-state":R(n,r),"data-value":n??void 0,"data-max":r,...d,ref:t})})});k.displayName=b;var E="ProgressIndicator",I=x.forwardRef((a,t)=>{const{__scopeProgress:l,...s}=a,o=se(E,l);return e.jsx(M.div,{"data-state":R(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...s,ref:t})});I.displayName=E;function ce(a,t){return`${Math.round(a/t*100)}%`}function R(a,t){return a==null?"indeterminate":a===t?"complete":"loading"}function L(a){return typeof a=="number"}function $(a){return L(a)&&!isNaN(a)&&a>0}function _(a,t){return L(a)&&!isNaN(a)&&a<=t&&a>=0}function oe(a,t){return`Invalid prop \`max\` of value \`${a}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${w}\`.`}function re(a,t){return`Invalid prop \`value\` of value \`${a}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${w} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ne=k,le=I;function de({className:a,value:t,...l}){return e.jsx(ne,{"code-path":"src/components/ui/progress.tsx:12:5","data-slot":"progress",className:D("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",a),...l,children:e.jsx(le,{"code-path":"src/components/ui/progress.tsx:20:7","data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const P=[{name:"Бронза",minPoints:0,color:"bg-amber-700",discount:1},{name:"Серебро",minPoints:1e3,color:"bg-gray-400",discount:3},{name:"Золото",minPoints:5e3,color:"bg-yellow-500",discount:5},{name:"Платина",minPoints:15e3,color:"bg-cyan-500",discount:10}];function ye(){const{user:a}=V(),{getLoyaltyInfo:t,getLoyaltyHistory:l}=B(),[s,o]=x.useState(null),[i,d]=x.useState([]),[r,n]=x.useState(!0);x.useEffect(()=>{a&&Promise.all([t(a.id),l(a.id)]).then(([c,g])=>{c.success&&c.data&&o(c.data),g.success&&g.data&&d(g.data),n(!1)})},[a,t,l]);const u=()=>{s?.cardNumber&&(navigator.clipboard.writeText(s.cardNumber),G.success("Номер карты скопирован"))},y=P.findIndex(c=>(s?.points||0)>=c.minPoints),p=P[y+1],h=p?Math.min(100,(s?.points||0)/p.minPoints*100):100;return r?e.jsx("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:60:7",className:"container mx-auto px-4 py-8",children:e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:61:9",className:"animate-pulse space-y-6",children:[e.jsx("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:62:11",className:"h-48 bg-gray-200 rounded-lg"}),e.jsx("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:63:11",className:"h-64 bg-gray-200 rounded-lg"})]})}):e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:70:5",className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{"code-path":"src/pages/account/LoyaltyPage.tsx:71:7",className:"text-2xl md:text-3xl font-bold text-gray-900 mb-6",children:"Программа лояльности"}),e.jsx(m,{"code-path":"src/pages/account/LoyaltyPage.tsx:74:7",className:"mb-8 overflow-hidden",children:e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:75:9",className:`bg-gradient-to-r ${P[y]?.color||"bg-amber-700"} p-8 text-white`,children:[e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:76:11",className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:77:13",children:[e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:78:15",className:"flex items-center gap-2 mb-2",children:[e.jsx(X,{"code-path":"src/pages/account/LoyaltyPage.tsx:79:17",className:"w-6 h-6"}),e.jsxs("span",{"code-path":"src/pages/account/LoyaltyPage.tsx:80:17",className:"text-white/80",children:["Уровень ",P[y]?.name]})]}),e.jsxs("h2",{"code-path":"src/pages/account/LoyaltyPage.tsx:82:15",className:"text-3xl font-bold mb-1",children:[s?.points.toLocaleString("ru-RU")," баллов"]}),e.jsxs("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:85:15",className:"text-white/80",children:["= ",(s?.points||0/10).toFixed(0)," ₽ для оплаты покупок"]})]}),e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:89:13",className:"text-right",children:[e.jsx("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:90:15",className:"text-sm text-white/80 mb-1",children:"Номер карты"}),e.jsxs("button",{"code-path":"src/pages/account/LoyaltyPage.tsx:91:15",onClick:u,className:"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-lg hover:bg-white/30 transition-colors",children:[e.jsx("span",{"code-path":"src/pages/account/LoyaltyPage.tsx:95:17",className:"font-mono text-lg",children:s?.cardNumber}),e.jsx(q,{"code-path":"src/pages/account/LoyaltyPage.tsx:96:17",className:"w-4 h-4"})]})]})]}),p&&e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:102:13",className:"mt-6",children:[e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:103:15",className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{"code-path":"src/pages/account/LoyaltyPage.tsx:104:17",children:[s?.points.toLocaleString("ru-RU")," баллов"]}),e.jsxs("span",{"code-path":"src/pages/account/LoyaltyPage.tsx:105:17",children:[p.minPoints.toLocaleString("ru-RU")," баллов"]})]}),e.jsx(de,{"code-path":"src/pages/account/LoyaltyPage.tsx:107:15",value:h,className:"h-2 bg-white/30"}),e.jsxs("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:108:15",className:"text-sm text-white/80 mt-2",children:["Наберите еще ",(p.minPoints-(s?.points||0)).toLocaleString("ru-RU")," баллов для уровня ",p.name," (",p.discount,"% скидка)"]})]})]})}),e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:117:7",className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:119:9",className:"md:col-span-2 space-y-6",children:[e.jsxs(m,{"code-path":"src/pages/account/LoyaltyPage.tsx:120:11",children:[e.jsx(v,{"code-path":"src/pages/account/LoyaltyPage.tsx:121:13",children:e.jsx(N,{"code-path":"src/pages/account/LoyaltyPage.tsx:122:15",children:"Уровни лояльности"})}),e.jsx(f,{"code-path":"src/pages/account/LoyaltyPage.tsx:124:13",children:e.jsx("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:125:15",className:"space-y-4",children:P.map((c,g)=>e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:127:19",className:`flex items-center gap-4 p-4 rounded-lg ${g===y?"bg-red-50 border border-red-200":"bg-gray-50"}`,children:[e.jsx("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:132:21",className:`w-10 h-10 ${c.color} rounded-full flex items-center justify-center text-white font-bold`,children:c.name[0]}),e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:135:21",className:"flex-1",children:[e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:136:23",className:"flex items-center gap-2",children:[e.jsx("span",{"code-path":"src/pages/account/LoyaltyPage.tsx:137:25",className:"font-semibold",children:c.name}),g===y&&e.jsx(H,{"code-path":"src/pages/account/LoyaltyPage.tsx:139:27",className:"bg-red-600",children:"Текущий"})]}),e.jsxs("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:142:23",className:"text-sm text-gray-500",children:["От ",c.minPoints.toLocaleString("ru-RU")," баллов"]})]}),e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:146:21",className:"text-right",children:[e.jsxs("span",{"code-path":"src/pages/account/LoyaltyPage.tsx:147:23",className:"font-bold text-lg",children:[c.discount,"%"]}),e.jsx("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:148:23",className:"text-xs text-gray-500",children:"скидка"})]})]},c.name))})})]}),e.jsxs(m,{"code-path":"src/pages/account/LoyaltyPage.tsx:157:11",children:[e.jsx(v,{"code-path":"src/pages/account/LoyaltyPage.tsx:158:13",children:e.jsx(N,{"code-path":"src/pages/account/LoyaltyPage.tsx:159:15",children:"История начислений"})}),e.jsx(f,{"code-path":"src/pages/account/LoyaltyPage.tsx:161:13",children:i.length>0?e.jsx("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:163:17",className:"space-y-3",children:i.slice(0,10).map(c=>e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:165:21",className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:169:23",children:[e.jsx("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:170:25",className:"font-medium",children:c.description}),e.jsx("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:171:25",className:"text-sm text-gray-500",children:new Date(c.createdAt).toLocaleDateString("ru-RU")})]}),e.jsxs("span",{"code-path":"src/pages/account/LoyaltyPage.tsx:175:23",className:`font-bold ${c.type==="earn"?"text-green-600":"text-red-600"}`,children:[c.type==="earn"?"+":"-",c.points]})]},c.id))}):e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:183:17",className:"text-center py-8 text-gray-500",children:[e.jsx(C,{"code-path":"src/pages/account/LoyaltyPage.tsx:184:19",className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:185:19",children:"История начислений пуста"})]})})]})]}),e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:193:9",className:"space-y-6",children:[e.jsxs(m,{"code-path":"src/pages/account/LoyaltyPage.tsx:195:11",children:[e.jsx(v,{"code-path":"src/pages/account/LoyaltyPage.tsx:196:13",children:e.jsx(N,{"code-path":"src/pages/account/LoyaltyPage.tsx:197:15",className:"text-base",children:"Как это работает"})}),e.jsxs(f,{"code-path":"src/pages/account/LoyaltyPage.tsx:199:13",className:"space-y-4",children:[e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:200:15",className:"flex gap-3",children:[e.jsx("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:201:17",className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(W,{"code-path":"src/pages/account/LoyaltyPage.tsx:202:19",className:"w-4 h-4 text-red-600"})}),e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:204:17",children:[e.jsx("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:205:19",className:"font-medium",children:"Покупайте"}),e.jsx("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:206:19",className:"text-sm text-gray-500",children:"Получайте 1 балл за каждые 10 ₽ в чеке"})]})]}),e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:209:15",className:"flex gap-3",children:[e.jsx("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:210:17",className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(C,{"code-path":"src/pages/account/LoyaltyPage.tsx:211:19",className:"w-4 h-4 text-red-600"})}),e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:213:17",children:[e.jsx("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:214:19",className:"font-medium",children:"Накапливайте"}),e.jsx("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:215:19",className:"text-sm text-gray-500",children:"Повышайте уровень для больших скидок"})]})]}),e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:218:15",className:"flex gap-3",children:[e.jsx("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:219:17",className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(S,{"code-path":"src/pages/account/LoyaltyPage.tsx:220:19",className:"w-4 h-4 text-red-600"})}),e.jsxs("div",{"code-path":"src/pages/account/LoyaltyPage.tsx:222:17",children:[e.jsx("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:223:19",className:"font-medium",children:"Тратьте"}),e.jsx("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:224:19",className:"text-sm text-gray-500",children:"1 балл = 0.1 ₽ для оплаты покупок"})]})]})]})]}),e.jsx(m,{"code-path":"src/pages/account/LoyaltyPage.tsx:231:11",className:"bg-gradient-to-br from-red-600 to-red-700 text-white",children:e.jsxs(f,{"code-path":"src/pages/account/LoyaltyPage.tsx:232:13",className:"p-6",children:[e.jsx(S,{"code-path":"src/pages/account/LoyaltyPage.tsx:233:15",className:"w-10 h-10 mb-4"}),e.jsx("h3",{"code-path":"src/pages/account/LoyaltyPage.tsx:234:15",className:"font-bold text-lg mb-2",children:"Приведи друга"}),e.jsx("p",{"code-path":"src/pages/account/LoyaltyPage.tsx:235:15",className:"text-white/80 text-sm mb-4",children:"Получите 500 баллов за каждого друга, который зарегистрируется по вашей ссылке"}),e.jsxs(O,{"code-path":"src/pages/account/LoyaltyPage.tsx:238:15",variant:"secondary",className:"w-full",children:["Поделиться",e.jsx(z,{"code-path":"src/pages/account/LoyaltyPage.tsx:240:17",className:"w-4 h-4 ml-1"})]})]})})]})]})]})}export{ye as LoyaltyPage};
